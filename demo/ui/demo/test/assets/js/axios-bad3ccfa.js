import{a as n}from"./axios-77b6ca81.js";import{N as s}from"./nprogress-2db98fbf.js";import{A as o}from"./element-plus-0a8efd0e.js";/*! Version: v0.0.0 */const i=n.create({baseURL:"/api"});let t=!1;i.interceptors.request.use(e=>(e.progress&&a(),e),e=>(o.error("服务器出问题了"),Promise.reject(e)));const a=async()=>{s.inc(),setTimeout(()=>{s.done()},200)};i.interceptors.response.use(e=>{const r=e.data;return r.code==200||!r.code?e:r.code==407?c(e):(o.warning(r.msg),Promise.reject(r.msg))},e=>(s.done(),Promise.reject(e)));function c(e){return e.config,t?new Promise(r=>{}):(t=!0,new Promise(e))}export{i as s};
